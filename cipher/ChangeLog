2001-11-24  Werner Koch  <wk@gnupg.org>

	* md.c (gcry_md_map_name): Look also for OIDs prefixed with "oid."
	or "OID." so that an OID string can be used as an S-Exp token.

2001-11-20  Werner Koch  <wk@gnupg.org>

	* md.c (gcry_md_map_name): Lookup by OID if the the name begins
	with a digit.
	(oid_table): New.
	
2001-11-16  Werner Koch  <wk@gnupg.org>

	* md.c (gcry_md_info): New operator GCRYCTL_IS_ALGO_ENABLED.

2001-11-07  Werner Koch  <wk@gnupg.org>

	* md.c (gcry_md_hash_buffer): Close the handle which was left open
	for algorithms other than rmd160.

2001-08-08  Werner Koch  <wk@gnupg.org>

	* rndw32.c (gather_random): Use toolhelp in addition to the NT
	gatherer for Windows2000.  Suggested by Sami Tolvanen.

	* random.c (read_pool): Fixed length check, this used to be one
	byte to strict.  Made an assert out of it because the caller has
	already made sure that only poolsize bytes are requested.
	Reported by Marcus Brinkmann.

2001-08-03  Werner Koch  <wk@gnupg.org>

	* cipher.c (cipher_encrypt, cipher_decrypt): Prepare to return
	errors. We have to change the interface to all ciphers to make
	this really work but we should do so to prepare for hardware
	encryption modules.
	(gcry_cipher_encrypt, gcry_cipher_decrypt): Return the error and
	set lasterr. 
	(gcry_cipher_ctl): Make sure that errors from setkey are returned.

2001-08-02  Werner Koch  <wk@gnupg.org>

	* rndlinux.c (gather_random): casted a size_t arg to int so that
	the format string is correct.  Casting is okay here and avoids
	translation changes. 

	* random.c (fast_random_poll): Do not check the return code of
	getrusage.

	* rndunix.c: Add a signal.h header to avoid warnings on Solaris 7
	and 8.

	* tiger.c (print_abc,print_data): Removed.

	* rijndael.c, des.c, blowfish.c, twofish.c, cast5.c, arcfour.c
	(burn_stack): New.  Add wrappers for most functions to be able to
	call burn_stack after the function invocation. This methods seems
	to be the most portable way to zeroise the stack used. It does
	only work on stack frame based machines but it is highly portable
	and has no side effects.  Just setting the automatic variables at
	the end of a function to zero does not work well because the
	compiler will optimize them away - marking them as volatile would
	be bad for performance.
	* md5.c, sha1.c, rmd160.c, tiger.c (burn_stack): Likewise.
	* random.c (burn_stack): New.
	(mix_pool): Use it here to burn the stack of the mixblock function.

	* primegen.c (_gcry_generate_elg_prime): Freed q at 3 places.
	Thanks to Tommi Komulainen.

	* arcfour.c (arcfour_setkey): Check the minimim keylength against
	bytes and not bits.
	(selftest): Must reset the key before decryption. 

2001-05-31  Werner Koch  <wk@gnupg.org>

	* sha1.c (sha1_init): Made static.

        Changed all g10_ prefixed function names as well as some mpi_
	function names to cope with the introduced naming changes.
	
	* md.c (prepare_macpads): Made key const.

2001-05-28  Werner Koch  <wk@gnupg.org>

	* rndegd.c (gather_random): Removed the use of tty_printf.

2001-03-29  Werner Koch  <wk@gnupg.org>

	* md5.c (md5_final): Fixed calculation of hashed length.  Thanks
	to disastry@saiknes.lv for pointing out that it was horrible wrong
	for more than 512MB of input.
	* sha1.c (sha1_final): Ditto.
	* rmd160.c (rmd160_final): Ditto.
	* tiger.c (tiger_final): Ditto.

	* blowfish.c (encrypt,do_encrypt): Changed name to do_encrypt to
	avoid name clashes with an encrypt function in stdlib.h of
	Dynix/PIX.  Thanks to Gene Carter.
	* elgamal.c (encrypt,do_encrypt): Ditto.

	* twofish.c (gnupgext_enum_func): Use only when when compiled as a
	module.
	* rijndael.c (gnupgext_enum_func): Ditto.

	* tiger.c (tiger_get_info): Return "TIGER192" and not just
	"TIGER".  By Edwin Woudt.
	
	* random.c: Always include time.h - standard requirement.  Thanks
	to James Troup.

	* rndw32.c: Fixes to the macros.

2001-01-11  Werner Koch  <wk@gnupg.org>

	* cipher.c (cipher_encrypt,gcry_cipher_encrypt): Use blocksize and
	not 8.

2000-12-19  Werner Koch  <wk@gnupg.org>

 	Major change:
	Removed all GnuPG stuff and renamed this piece of software
	to gcrypt. 

2000-11-14  Werner Koch  <wk@gnupg.org>

	* dsa.c (test_keys): Replaced mpi_alloc by gcry_mpi_new and
	mpi_free by gcry_mpi_release.
	* elgamal.c (test_keys,generate): Ditto, also for mpi_alloc_secure.
	* rsa.c (test_keys,generate,rsa_verify): Ditto.
	* primegen.c (generate_elg_prime): Ditto.
	(gen_prime): Ditto and removed nlimbs.

	* rsa.c (generate): Allocate 2 more vars in secure memory.

	* Makefile.am (OMIT_DEPENDENCIES): Hack to work around dependency
	problems.

2000-10-09  Werner Koch  <wk@gnupg.org>

	* arcfour.c, arcfour.h: New.
	* cipher.c (cipher_encrypt, cipher_decrypt): Add stream mode.
	(setup_cipher_table): Add Arcfour.
	(gcry_cipher_open): Kludge to allow stream mode.

Wed Oct  4 13:16:18 CEST 2000  Werner Koch  <wk@openit.de>

        * sha1.c (transform): Use rol() macro.  Actually this is not needed
        for a newer gcc but there are still aoter compilers.

        * rsa.c (test_keys): Use new random function. 

        * md.c (gcry_md_setkey): New function to overcome problems with
        const conflics.  
        (gcry_md_ctl): Pass set key to the new functions.

        * rijndael.c: New.
        * cipher.c: Add Rijndael support.

Mon Sep 18 16:35:45 CEST 2000  Werner Koch  <wk@openit.de>

        * rndlinux.c (open_device): Loose random device checking.
        By Nils Ellmenreich.

        * random.c (fast_random_poll): Check ENOSYS for getrusage.
        * rndunix.c:  Add 2 sources for QNX. By Sam Roberts.

        * pubkey.c (gcry_pk_algo_info): Add GCRYCTL_GET_ALGO_USAGE.

        * rsa.c: Changed the comment about the patent.
        (secret): Speed up by using the CRT.  For a 2k keys this
        is about 3 times faster.
        (stronger_key_check): New but unused code to check the secret key.
        * Makefile.am: Included rsa.[ch].
        * pubkey.c: Enabled RSA support.
        (pubkey_get_npkey): Removed RSA workaround.

Mon Jul 31 10:04:47 CEST 2000  Werner Koch  <wk@openit.de>

  * pubkey.c: Replaced all gcry_sexp_{car,cdr}_{data,mpi} by the new
  gcry_sexp_nth_{data,mpi} functions.

Tue Jul 25 17:44:15 CEST 2000  Werner Koch  <wk@openit.de>

  * pubkey.c (exp_to_key,sexp_to_sig,sexp_to_enc,gcry_pk_encrypt,
    gcry_pk_decrypt,gcry_pk_sign,gcry_pk_genkey): Changed to work with
    the new S-Exp interface.

Mon Jul 17 16:35:47 CEST 2000  Werner Koch  <wk@>

  * random.c (gather_faked): Replaced make_timestamp by time(2) again.

Fri Jul 14 19:38:23 CEST 2000  Werner Koch  <wk@>

  * md.c (gcry_md_ctl): Support GCRYCTL_{START,STOP}_DUMP.

  * Makefile.am: Never compile mingw32 as module.

  * Makefile.am: Tweaked module build and removed libtool

  * Makefile.am:  Replaced -O1 by -O. Suggested by Alec Habig.

  * elgamal.c (sign): Removed inactive code.

  * rsa.c, rsa.h: New based on the old module version (only in CVS for now).
  * pubkey.c (setup_pubkey_table): Added commented support for RSA.

  * rndunix.c (waitpid): New. For UTS 2.1.  All by Dave Dykstra.
  (my_popen): Do the FD_CLOEXEC only if it is available
  (start_gatherer): Cope with missing _SC_OPEN_MAX

  * rndunix.c: Add some more headers for QNX. By Sam Roberts.

  * rndegd.c (gather_random): Shortcut level 0.
  * rndunix.c (gather_random): Ditto.
  * rndw32.c (gather_random): Ditto.

  * rndw32.c: Replaced with code from Cryptlib and commented the old stuff.
  * rndw32.c: Add some debuging code enabled by an environment variable.

  * random.c (read_seed_file): Binary open for DOSish system
  (update_random_seed_file): Ditto.
  * random.c [MINGW32]: Include process.h for getpid.
  * random.c (fast_random_poll): Add clock_gettime() as fallback for
  system which support this POSIX.4 fucntion. By Sam Roberts.

  * random.c (read_seed_file): Removed the S_ISLNK test becuase it
  is already covered by !S_ISREG and is not defined in Unixware.
  Reported by Dave Dykstra.
  (update_random_seed_file): Silently ignore update request when pool
  is not filled.

  * random.c (read_seed_file): New.
  (set_random_seed_file): New.
  (read_pool): Try to read the seeding file.
  (update_random_seed_file): New.

  (read_pool): Do an initial extra seeding when level 2 quality random
  is requested the first time.	This requestes at least POOLSIZE/2 bytes
  of entropy.  Compined with the seeding file this should make normal
  random bytes cheaper and increase the quality of the random bytes
  used for key generation.

  * random.c (read_pool): Print a more friendly error message in
  cases when too much random is requested in one call.

  * random.c (fast_random_poll): Check whether RUSAGE_SELF is defined;
  this is not the case for some ESIX and Unixware, although they have
  getrusage().

  * primegen.c (generate_elg_prime): All primes are now generated with
  the lowest random quality level.  Because they are public anyway we
  don't need stronger random and by this we do not drain the systems
  entropy so much.

  * primegen.c (register_primegen_progress): New.
  * dsa.c (register_pk_dsa_progress): New.
  * elgamal.c (register_pk_elg_progress): New.

  * elgamal.c (wiener_map): New.
  (gen_k): Use a much smaller k.
  (generate): Calculate the qbits using the wiener map and
  choose an x at a size comparable to the one choosen in gen_k

  * rmd160.c (rmd160_get_info): Moved casting to the left side due to a
  problem with UTS4.3.	Suggested by Dave Dykstra.
  * sha1.c (sha1_get_info): Ditto.
  * tiger.c (tiger_get_info): Ditto.
  * md5.c (md5_get_info): Ditto
  * des.c (des_get_info): Ditto.
  * blowfish.c (blowfish_get_info): Ditto.
  * cast5.c (cast5_get_info): Ditto.
  * twofish.c (twofish_get_info): Ditto.

Fri Mar 24 11:25:45 CET 2000  Werner Koch  <wk@openit.de>

	* md.c (md_open): Add hmac arg and allocate space for the pads.
	(md_finalize): Add HMAC support.
	(md_copy): Ditto.
	(md_close): Ditto.
	(gcry_md_reset): Ditto.
	(gcry_md_ctl): Ditto.
	(prepare_macpdas): New.

Mon Mar 13 19:22:46 CET 2000  Werner Koch  <wk@openit.de>

	* md.c (gcry_md_hash_buffer): Add support for the other algorithms.

Mon Jan 31 16:37:34 CET 2000  Werner Koch  <wk@gnupg.de>

	* genprime.c (generate_elg_prime): Fixed returned factors which never
	worked for non-DSA keys.

Thu Jan 27 18:00:44 CET 2000  Werner Koch  <wk@gnupg.de>

	* pubkey.c (sexp_to_key): Fixed mem leaks in case of errors.

Mon Jan 24 22:24:38 CET 2000  Werner Koch  <wk@gnupg.de>

	* pubkey.c (gcry_pk_decrypt): Implemented.
	(gcry_pk_encrypt): Implemented.
	(gcry_pk_testkey): New.
	(gcry_pk_genkey): New.
	(pubkey_decrypt): Made static.
	(pubkey_encrypt): Ditto.
	(pubkey_check_secret_key): Ditto.
	(pubkey_generate): Ditto.

Mon Jan 24 13:04:28 CET 2000  Werner Koch  <wk@gnupg.de>

	* pubkey.c (pubkey_nbits): Removed and replaced by ...
	(gcry_pk_get_nbits): this new one.

Wed Dec  8 21:58:32 CET 1999  Werner Koch  <wk@gnupg.de>

	* dsa.c: s/mpi_powm/gcry_mpi_powm/g
	* elgamal.c: Ditto.
	* primegen.c: Ditto.

	* : Replaced g10_opt_verbose by g10_log_verbosity().

	* Makefile.am (INCLUDES): removed intl, add ../gcrypt

Fri Nov 19 17:15:20 CET 1999  Werner Koch  <wk@gnupg.de>

	* dynload.c (cmp_filenames): New to replaced compare_filename() in
	module.
	(register_cipher_extension): Removed the tilde expansion stuff.
	* rndeg.c (my_make_filename): New.

	* : Replaced header util.h by g10lib.h

	* random.c (gather_faked): Replaced make_timestamp by time(2).
	Disabled wrning printed with tty_printf.
	* rndlinux.c (gather_random): Always use fprintf instead of tty_xxx;
	this should be replaced by a callback function.

	* primegen.c (gen_prime): Use gcry_mpi_randomize.
	(is_prime): Ditto.
	* elgamal.c (test_keys): Ditto.
	* dsa.c (test_keys): Ditto.

	* cipher.c (gcry_cipher_close): Die on invalid handle.

Mon Nov 15 21:36:02 CET 1999  Werner Koch  <wk@gnupg.de>

	* elgamal.c (gen_k): Use the new random API.
	(generate): Ditto.
	* dsa.c (gen_k): Ditto.
	(generate): Ditto.

Sat Nov 13 17:44:23 CET 1999  Werner Koch  <wk@gnupg.de>

	* pubkey.c (disable_pubkey_algo): Made static.
	(gcry_pk_ctl): New.

	* random.c (get_random_bits): Renamed to ...
	(get_random_bytes): ... this and made static.
	(gcry_random_bytes): New.
	(gcry_random_bytes_secure): New.
	(randomize_buffer): Renamed to ...
	(gcry_randomize): ...this.

	* md.c (gcry_md_hash_buffer): New.

	* pubkey.c (gcry_pk_algo_info): 4 new commands.
	(pubkey_get_npkey): Made static.
	(pubkey_get_nskey): Made static.
	(pubkey_get_nsig): Made static.
	(pubkey_get_nenc): Made static.

	* pubkey.c: Removed all G10ERR_xxx.
	* cipher.c: Changed all GCRYERR_INV_ALGO to GCRYERR_INV_CIPHER_ALGO.
	* md.c: Changed all GCRYERR_INV_ALGO to GCRYERR_INV_MD_ALGO.
	* cast5.c (cast_setkey): Changed errocodes to GCRYERR_xxx.
	* blowfish.c: Ditto.
	* des.c: Ditto.
	* twofish.c: Ditto.
	* dsa.c: Ditto.
	* elgamal.c: Ditto.

	* g10c.c: Removed

	* cipher.c (gcry_cipher_open): Replaced alloc functions and return NULL
	if we are out of core.
	* dynload.c: Replaced all memory allocation functions.
	* md.c: Ditto.
	* primegen.c: Ditto.
	* pubkey.c: Ditto.
	* random.c: Ditto.
	* rndw32.c: Ditto.
	* elgamal.c: Ditto.
	* dsa.c: Ditto.

Tue Oct 26 14:10:21 CEST 1999  Werner Koch  <wk@gnupg.de>

	* elgamal.c (sign): Hugh found strange code here. Replaced by BUG().

	* cipher.c: Merged with gcrypt/symapi.c.

	* pubkey.c (string_to_pubkey_algo): Renamed function to ...
	(gcry_pk_map_name): ... this.
	(pubkey_algo_to_string): Renamed function to ...
	(gcry_pk_algo_name): ... this.
	(gcry_pk_algo_info): New.
	* pubkey.c: Merged with gcrypt/pkapi.c.

	* md.c (md_reset): Clear finalized; thanks to Ulf Moeller for
	fixing this bug.

	* md.c: Merged with gcrypt/mdapi.c

Wed Sep 15 14:39:59 CEST 1999  Michael Roth <mroth@nessie.de>

	* des.c: Various speed improvements: One bit pre rotation
	  trick after initial permutation (Richard Outerbridge).
	  Finished test of SSLeay Tripple-DES patterns.

Wed Sep 15 16:22:17 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* rndw32.c: New.

Mon Sep 13 10:51:29 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* bithelp.h: New.
	* rmd160.h, sha1.h, md5.h: Use the rol macro from bithelp.h

Tue Sep  7 16:23:36 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* Makefile.am: Fixed seds for latest egcc. By Ollivier Robert.

Mon Sep  6 19:59:08 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* des.c (selftest): Add some testpattern

Mon Aug 30 20:38:33 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* cipher.c (do_cbc_encrypt): Fixed serious bug occuring when not using
	in place encryption. Pointed out by Frank Stajano.

Mon Jul 26 09:34:46 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* md5.c (md5_final): Fix for a SCO cpp bug.

Thu Jul 15 10:15:35 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* elgamal.c (elg_check_secret_key,elg_encrypt
	elg_decrypt,elg_sign,elg_verify): Sanity check on the args.
	* dsa.c (dsa_check_secret_key,dsa_sign,dsa_verify): Ditto.

	* pubkey.c (disable_pubkey_algo): New.
	(check_pubkey_algo2): Look at disabled algo table.
	* cipher.c (disable_cipher_algo): New.
	(check_cipher_algo): Look at disabled algo table.

Wed Jul  7 13:08:40 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* Makefile.am: Support for libtool.

Fri Jul  2 11:45:54 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* dsa.c (gen_k): Changed algorithm to consume less random bytes
	* elgamal.c (gen_k): Ditto.

	* random.c (random_dump_stats): New.

Thu Jul  1 12:47:31 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* primegen.c, elgamal.c, dsa.c (progess): New and replaced all
	fputc with a call to this function.

Sat Jun 26 12:15:59 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* rndegd.c (do_write): s/ssize_t/int/ due to SunOS 4.1 probs.

	* cipher.c (do_cbc_encrypt, do_cbc_decrypt): New.

	* dynload.c (HAVE_DL_SHL_LOAD): Map hpux API to dlopen (Dave Dykstra).
	* Makefile.am (install-exec-hook): Removed.

Sun May 23 14:20:22 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* cipher.c (setup_cipher_table): Enable Twofish

	* random.c (fast_random_poll): Disable use of times() for mingw32.

Mon May 17 21:54:43 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* dynload.c (register_internal_cipher_extension): Minor init fix.

Tue May  4 15:47:53 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* primegen.c (gen_prime): Readded the Fermat test. Fixed the bug
	that we didn't correct for step when passing the prime to the
	Rabin-Miller test which led to bad performance (Stefan Keller).
	(check_prime): Add a first Fermat test.

Sun Apr 18 10:11:28 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* cipher.c (cipher_setiv): Add ivlen arg, changed all callers.

	* random.c (randomize_buffer): alway use secure memory because
	we can't use m_is_secure() on a statically allocated buffer.

	* twofish.c: Replaced some macros by a loop to reduce text size.
	* Makefile.am (twofish): No more need for sed editing.

Fri Apr  9 12:26:25 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* cipher.c (cipher_open): Reversed the changes for AUTO_CFB.

	* blowfish.c: Dropped the Blowfish 160 mode.
	* cipher.c (cipher_open): Ditto.
	(setup_cipher_table): Ditto.  And removed support of twofish128

Wed Apr  7 20:51:39 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* random.c (get_random_bits): Can now handle requests > POOLSIZE

	* cipher.c (cipher_open): Now uses standard CFB for automode if
	the blocksize is gt 8 (according to rfc2440).

	* twofish.c: Applied Matthew Skala's patches for 256 bit key.

Tue Apr  6 19:58:12 CEST 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* random.c (get_random_bits): Can now handle requests > POOLSIZE

	* cipher.c (cipher_open): Now uses standard CFB for automode if
	the blocksize is gt 8 (according to rfc2440).

Sat Mar 20 11:44:21 CET 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* rndlinux.c (tty_printf) [IS_MODULE]: Removed.

	* rndegd.c (gather_random): Some fixes.

Wed Mar 17 13:09:03 CET 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* rndegd.c (do_read): New.
	(gather_random): Changed the implementation.

Mon Mar  8 20:47:17 CET 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* dynload.c (DLSYM_NEEDS_UNDERSCORE): Renamed.

Fri Feb 26 17:55:41 CET 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* md.c: Nearly a total rewrote.

Wed Feb 24 11:07:27 CET 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* cipher.c (context): Fixed alignment
	* md.c: Ditto.

	* rndegd.c: New

Mon Feb 22 20:04:00 CET 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* rndegd.c: New.

Wed Feb 10 17:15:39 CET 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* Makefile.am: Modules are now figured out by configure
	* construct.c: New. Generated by configure. Changed all modules
	to work with that.
	* sha1.h: Removed.
	* md5.h: Removed.

	* twofish.c: Changed interface to allow Twofish/256

	* rndunix.c (start_gatherer): Die on SIGPIPE.

Wed Jan 20 18:59:49 CET 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* rndunix.c (gather_random): Fix to avoid infinite loop.

Sun Jan 17 11:04:33 CET 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* des.c (is_weak_key): Replace system memcmp due to bugs
	in SunOS's memcmp.
	(des_get_info): Return error on failed selftest.
	* twofish.c (twofish_setkey): Return error on failed selftest or
	invalid keylength.
	* cast5.c (cast_setkey): Ditto.
	* blowfish.c (bf_setkey): Return error on failed selftest.

Tue Jan 12 11:17:18 CET 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* random.c (random_is_faked): New.

	* tiger.c: Only compile if we have the u64 type

Sat Jan  9 16:02:23 CET 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* rndunix.c (gather_random): check for setuid.

	* Makefile.am: Add a way to staically link random modules

Thu Jan  7 18:00:58 CET 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* md.c (md_stop_debug): Do a flush first.
	(md_open): size of buffer now depends on the secure parameter

Sun Jan  3 15:28:44 CET 1999  Werner Koch  <wk@isil.d.shuttle.de>

	* rndunix.c (start_gatherer): Fixed stupid ==/= bug

1998-12-31  Geoff Keating  <geoffk@ozemail.com.au>

	* des.c (is_weak_key): Rewrite loop end condition.

Tue Dec 29 14:41:47 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>

	* random.c: add unistd.h for getpid().
	(RAND_MAX): Fallback value for Sun.

Wed Dec 23 17:12:24 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>

	* md.c (md_copy): Reset debug.

Mon Dec 14 21:18:49 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>

	* random.c (read_random_source): Changed the interface to the
	random gathering function.
	(gather_faked): Use new interface.
	* dynload.c (dynload_getfnc_fast_random_poll): Ditto.
	(dynload_getfnc_gather_random): Ditto.
	* rndlinux.c (gather_random): Ditto.
	* rndunix.c (gather_random): Ditto.

Sat Dec 12 18:40:32 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>

	* dynload.c (SYMBOL_VERSION): New to cope with system which needs
	underscores.

	* rndunix.c: Rewrote large parts

Thu Dec 10 20:15:36 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>

	* dynload.c (load_extension): increased needed verbosity level.

	* random.c (fast_random_poll): Fallback to a default fast random
	poll function.
	(read_random_source): Always use the faked entroy gatherer if no
	gather module is available.
	* rndlinux.c (fast_poll): Removed.
	* rndunix.c (fast_poll): Removed.


Wed Nov 25 12:33:41 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* rand-*.c: Removed.
	* rndlinux.c : New.
	* rndunix.c : New.
	* random.c : Restructured the interface to the gather modules.
	(intialize): Call constructor functions
	(read_radnom_source): Moved to here.
	* dynload.c (dynload_getfnc_gather_random): New.
	(dynload_getfnc_fast_random_poll): New.
	(register_internal_cipher_extension): New.
	(register_cipher_extension): Support of internal modules.

Sun Nov  8 17:44:36 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* rand-unix.c (read_random_source): Removed the assert.

Mon Oct 19 18:34:30 1998  me,,,  (wk@tobold)

	* pubkey.c: Hack to allow us to give some info about RSA keys back.

Thu Oct 15 11:47:57 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* dynload.c: Support for DLD

Wed Oct 14 12:13:07 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* rand-unix.c: Now uses names from configure for /dev/random.

1998-10-10  SL Baur  <steve@altair.xemacs.org>

	* Makefile.am: fix sed -O substitutions to catch -O6, etc.

Tue Oct  6 10:06:32 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* rand-unix.c (HAVE_GETTIMEOFDAY): Fixed (was ..GETTIMEOFTIME :-)
	* rand-dummy.c (HAVE_GETTIMEOFDAY): Ditto.

Mon Sep 28 13:23:09 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* md.c (md_digest): New.
	(md_reset): New.

Wed Sep 23 12:27:02 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* tiger.c (TIGER_CONTEXT): moved "buf", so that it is 64 bit aligned.

Mon Sep 21 06:22:53 1998  Werner Koch  (wk@(none))

	* des.c: Some patches from Michael.

Thu Sep 17 19:00:06 1998  Werner Koch  (wk@(none))

	* des.c : New file from Michael Roth <mroth@nessie.de>

Mon Sep 14 11:10:55 1998  Werner Koch  (wk@(none))

	* blowfish.c (bf_setkey): Niklas Hernaeus patch to detect weak keys.

Mon Sep 14 09:19:25 1998  Werner Koch  (wk@(none))

	* dynload.c (RTLD_NOW): Now defined to 1 if it is undefined.

Mon Sep  7 17:04:33 1998  Werner Koch  (wk@(none))

	* Makefile.am: Fixes to allow a different build directory

Thu Aug  6 17:25:38 1998  Werner Koch,mobil,,,	(wk@tobold)

	* random.c (get_random_byte): Removed and changed all callers
	to use get_random_bits()

Mon Jul 27 10:30:22 1998  Werner Koch  (wk@(none))

	* cipher.c : Support for other blocksizes
	(cipher_get_blocksize): New.
	* twofish.c: New.
	* Makefile.am: Add twofish module.

Mon Jul 13 21:30:52 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* random.c (read_pool): Simple alloc if secure_alloc is not set.
	(get_random_bits): Ditto.

Thu Jul  9 13:01:14 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* dynload.c (load_extension): Function now nbails out if
	the program is run setuid.

Wed Jul  8 18:58:23 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* rmd160.c (rmd160_hash_buffer): New.

Thu Jul  2 10:50:30 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* cipher.c (cipher_open): algos >=100 use standard CFB

Thu Jun 25 11:18:25 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* Makefile.am: Support for extensions

Thu Jun 18 12:09:38 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* random.c (mix_pool): simpler handling for level 0

Mon Jun 15 14:40:48 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* tiger.c: Removed from dist, will reappear as dynload module

Sat Jun 13 14:16:57 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* pubkey.c: Major changes to allow extensions. Changed the inteface
	of all public key ciphers and added the ability to load extensions
	on demand.

	* misc.c: Removed.

Wed Jun 10 07:52:08 1998  Werner Koch,mobil,,,	(wk@tobold)

	* dynload.c: New.
	* cipher.c: Major changes to allow extensions.

Mon Jun  8 22:43:00 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* cipher.c: Major internal chnages to support extensions.
	* blowfish.c (blowfish_get_info): New and made all internal
	functions static, changed heder.
	* cast5.c (cast5_get_info): Likewise.

Mon Jun  8 12:27:52 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* tiger.c (transform): Fix for big endian

	* cipher.c (do_cfb_decrypt): Big endian fix.

Fri May 22 07:30:39 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* md.c (md_get_oid): Add a new one for TIGER.

Thu May 21 13:24:52 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* cipher.c: Add support for a dummy cipher

Thu May 14 15:40:36 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* rmd160.c (transform): fixed sigbus - I should better
	add Christian von Roques's new implemenation of rmd160_write.

Fri May  8 18:07:44 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* rand-internal.h, rand-unix.c, rand-w32.c, rand_dummy.c: New
	* random.c: Moved system specific functions to rand-****.c

Fri May  8 14:01:17 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* random.c (fast_random_poll): add call to gethrtime.

Tue May  5 21:28:55 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* elgamal.c (elg_generate): choosing x was not correct, could
	yield 6 bytes which are not from the random pool, tsss, tsss..

Tue May  5 14:09:06 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* primegen.c (generate_elg_prime): Add arg mode, changed all
	callers and implemented mode 1.

Mon Apr 27 14:41:58 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* cipher.c (cipher_get_keylen): New.

Sun Apr 26 14:44:52 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* tiger.c, tiger.h: New.

Wed Apr  8 14:57:11 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* misc.c (check_pubkey_algo2): New.

Tue Apr  7 18:46:49 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* cipher.c: New
	* misc.c (check_cipher_algo): Moved to cipher.c
	* cast5.c: Moved many functions to cipher.c
	* blowfish.c: Likewise.

Sat Apr  4 19:52:08 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* cast5.c: Implemented and tested.

Wed Apr  1 16:38:27 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* elgamal.c (elg_generate): Faster generation of x in some cases.

Thu Mar 19 13:54:48 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* blowfish.c (blowfish_decode_cfb): changed XOR operation
	(blowfish_encode_cfb): Ditto.

Thu Mar 12 14:04:05 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* sha1.c (transform): Rewrote

	* blowfish.c (encrypt): Unrolled for rounds == 16
	(decrypt): Ditto.

Tue Mar 10 16:32:08 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* rmd160.c (transform): Unrolled the loop.

Tue Mar 10 13:05:14 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* random.c (read_pool): Add pool_balance stuff.
	(get_random_bits): New.

	* elgamal.c (elg_generate): Now uses get_random_bits to generate x.


Tue Mar 10 11:33:51 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* md.c (md_digest_length): New.

Tue Mar 10 11:27:41 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* dsa.c (dsa_verify): Works.

Mon Mar  9 12:59:08 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* dsa.c, dsa.h: Removed some unused code.

Wed Mar  4 10:39:22 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* md.c (md_open): Add call to fast_random_poll.
	blowfish.c (blowfish_setkey): Ditto.

Tue Mar  3 13:32:54 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* rmd160.c (rmd160_mixblock): New.
	* random.c: Restructured to start with a new RNG implementation.
	* random.h: New.

Mon Mar  2 19:21:46 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* gost.c, gost.h: Removed because they did only conatin trash.

Sun Mar  1 16:42:29 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* random.c (fill_buffer): removed error message if n == -1.

Fri Feb 27 16:39:34 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* md.c (md_enable): No init if called twice.

Thu Feb 26 07:57:02 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* primegen.c (generate_elg_prime): Changed the progress printing.
	(gen_prime): Ditto.

Tue Feb 24 12:28:42 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* md5.c, md.5 : Replaced by a modified version of md5.c from
	GNU textutils 1.22.

Wed Feb 18 14:08:30 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* md.c, md.h : New debugging support

Mon Feb 16 10:08:47 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* misc.c (cipher_algo_to_string): New
	(pubkey_algo_to_string): New.
	(digest_algo_to_string): New.


